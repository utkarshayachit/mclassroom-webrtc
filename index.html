<html>
  <head>
    <style>
	    body { font: 14pt Arial, sans-serif; background: lightgrey; }
	    select { font: 14pt Arial, sans-serif; }
	    body { text-align: center; margin-top: 20pt;}
	    canvas { display: inline-block; background: #202020; box-shadow: 0px 0px 10px blue;}
	    #record.recording { background: red;
	    background: -webkit-radial-gradient(center, ellipse cover, #ff0000 0%,lightgrey 75%,lightgrey 100%,#7db9e8 100%); }
	  </style>
  </head>
	<video autoplay></video>

	<script>
		function checkWebRTC() {
			 // Note: Opera is unprefixed.
  		return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
            		navigator.mozGetUserMedia || navigator.msGetUserMedia);
		}
		if (!checkWebRTC()) {
			alert("Please use a WebRTC enabled browser.");
			throw "exception";
		}
		navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia ||
	                         		navigator.mozGetUserMedia || navigator.msGetUserMedia;
		var video = document.querySelector('video');

    var videoConstrains = {
      mandatory: {maxWidth: 400/*, maxHeight: 400, maxFrameRate: 15*/}
    };
  	navigator.getUserMedia({audio: false, video: videoConstrains}, function(stream) {
      window.video_stream = stream;
    	video.src = window.URL.createObjectURL(stream);
  	}, function() {alert("Failed!!!");});

    var audio_1Contraints = {
      mandatory: {sourceId: "Default"}
    };
  	navigator.getUserMedia({audio: audio_1Contraints, video: false}, function(stream) {
      window.audio_1 = stream;
//    	video.src = window.URL.createObjectURL(stream);
  	}, function() {alert("Failed  1!!!");});

 	navigator.getUserMedia({audio: true, video: false}, function(stream) {
      window.audio_2 = stream;
//    	video.src = window.URL.createObjectURL(stream);
  	}, function() {alert("Failed!!!");});


	</script>
</html>
